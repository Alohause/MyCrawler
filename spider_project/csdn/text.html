
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
    <article class="baidu_pl">
        <div id="article_content" class="article_content clearfix" style="height: 2000px; overflow: hidden;">
        <link rel="stylesheet" href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/kdoc_html_views-1a98987dfd.css">
        <link rel="stylesheet" href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/ck_htmledit_views-8d6d398833.css">
                <div id="content_views" class="htmledit_views atom-one-dark">
                    <p><img src="https://i-blog.csdnimg.cn/direct/b95721a7330a4ebb929a9d0ef2135f6a.jpeg"></p> 
<hr> 
<p><strong>目录</strong></p> 
<p style="margin-left:0px"><a href="#1.%E5%89%8D%E8%A8%80" target="_self">1.前言</a></p> 
<p style="margin-left:0px"><a href="#2.%E6%AD%A3%E6%96%87" target="_self">2.正文</a></p> 
<p style="margin-left:40px"><a href="#2.1%E5%8C%BA%E5%88%86%24%7B%7D%E4%B8%8E%23%7B%7D" target="_self">2.1区分${}与#{}</a></p> 
<p style="margin-left:80px"><a href="#2.1.1SQL%E6%B3%A8%E5%85%A5%E9%97%AE%E9%A2%98" target="_self">2.1.1SQL注入问题</a></p> 
<p style="margin-left:120px"><a href="#2.1.1.1%20%E4%BD%BF%E7%94%A8%C2%A0%24%7B%7D%C2%A0%28%E5%AD%98%E5%9C%A8%E6%B3%A8%E5%85%A5%E6%BC%8F%E6%B4%9E%29" target="_self">2.1.1.1 使用 ${} (存在注入漏洞)</a></p> 
<p style="margin-left:120px"><a href="#2.1.1.2%20%E4%BD%BF%E7%94%A8%C2%A0%23%7B%7D%C2%A0%28%E5%AE%89%E5%85%A8%E9%98%B2%E6%B3%A8%E5%85%A5%29" target="_self">2.1.1.2 使用 #{} (安全防注入)</a></p> 
<p style="margin-left:80px"><a href="#2.1.2%E9%A2%84%E7%BC%96%E8%AF%91SQL%E4%B8%8E%E5%8D%B3%E6%97%B6%E9%97%B4SQL" target="_self">2.1.2预编译SQL与即时间SQL</a></p> 
<p style="margin-left:120px"><a href="#2.1.2.1%C2%A0%23%7B%7D%C2%A0%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%20%28%E9%A2%84%E7%BC%96%E8%AF%91%20SQL%29" target="_self">2.1.2.1 #{} 工作原理 (预编译 SQL)</a></p> 
<p style="margin-left:120px"><a href="#2.1.2.2%24%7B%7D%C2%A0%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86%20%28%E5%8D%B3%E6%97%B6%E9%97%B4%20SQL%29" target="_self">2.1.2.2${} 工作原理 (即时间 SQL)</a></p> 
<p style="margin-left:80px"><a href="#2.1.3%24%7B%7D%20%E7%9A%84%E6%AD%A3%E7%A1%AE%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%E4%B8%8E%E9%81%BF%E5%9D%91%E6%8C%87%E5%8D%97" target="_self">2.1.3${} 的正确使用场景与避坑指南</a></p> 
<p style="margin-left:120px"><a href="#2.1.3.1%E5%9C%BA%E6%99%AF%EF%BC%9A%E5%8A%A8%E6%80%81%E6%8E%92%E5%BA%8F%E5%AD%97%E6%AE%B5%20%28ORDER%20BY%29" target="_self">2.1.3.1场景：动态排序字段 (ORDER BY)</a></p> 
<p style="margin-left:120px"><a href="#2.1.3.2%E9%81%BF%E5%9D%91%E6%8E%AA%E6%96%BD%EF%BC%9A%E7%99%BD%E5%90%8D%E5%8D%95%E6%A0%A1%E9%AA%8C%20%28Java%20%E5%B1%82%29" target="_self">2.1.3.2避坑措施：白名单校验 (Java 层)</a></p> 
<p style="margin-left:120px"><a href="#2.1.3.3%E6%89%A7%E8%A1%8C%E7%A4%BA%E4%BE%8B" target="_self">2.1.3.3执行示例</a></p> 
<p style="margin-left:80px"><a href="#2.1.4%E5%85%B3%E9%94%AE%E7%BB%93%E8%AE%BA" target="_self">2.1.4关键结论</a></p> 
<p style="margin-left:40px"><a href="#2.2%E5%8A%A8%E6%80%81SQL" target="_self">2.2动态SQL</a></p> 
<p style="margin-left:80px"><a href="#2.2.1%3Cif%3E%E6%A0%87%E7%AD%BE" target="_self">2.2.1标签</a></p> 
<p style="margin-left:80px"><a href="#2.2.2%3Cchoose%3E%3Cwhen%3E%3Cotherwise%3E%E6%A0%87%E7%AD%BE%EF%BC%88%E7%B1%BB%E4%BC%BCswitch-case%EF%BC%89" target="_self">2.2.2标签（类似switch-case）</a></p> 
<p style="margin-left:80px"><a href="#2.2.3%3Cwhere%3E%E6%A0%87%E7%AD%BE" target="_self">2.2.3标签</a></p> 
<p style="margin-left:80px"><a href="#2.2.4%3Cset%3E%E6%A0%87%E7%AD%BE" target="_self">2.2.4标签</a></p> 
<p style="margin-left:80px"><a href="#2.2.5%3Cforeach%3E%E6%A0%87%E7%AD%BE" target="_self">2.2.5标签</a></p> 
<p style="margin-left:80px"><a href="#2.2.6%3Ctrim%3E%E6%A0%87%E7%AD%BE" target="_self">2.2.6标签</a></p> 
<p style="margin-left:40px"><a href="#2.3like%E6%9F%A5%E8%AF%A2%EF%BC%88%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2%EF%BC%89" target="_self">2.3like查询（模糊查询）</a></p> 
<p style="margin-left:80px"><a href="#2.3.1%E4%BD%BF%E7%94%A8%E6%8B%BC%E6%8E%A5%E7%AC%A6" target="_self">2.3.1使用拼接符</a></p> 
<p style="margin-left:80px"><a href="#2.3.2%E4%BD%BF%E7%94%A8CONCAT%E5%87%BD%E6%95%B0" target="_self">2.3.2使用CONCAT函数</a></p> 
<p style="margin-left:80px"><a href="#2.3.3%20%E4%BD%BF%E7%94%A8%3Cbind%3E%E6%A0%87%E7%AD%BE%EF%BC%88XML%E4%B8%93%E7%94%A8%EF%BC%89" target="_self">2.3.3 使用标签（XML专用）</a></p> 
<p style="margin-left:80px"><a href="#2.3.4%E6%A8%A1%E7%B3%8A%E6%9F%A5%E8%AF%A2%E6%96%B9%E6%A1%88%E5%AF%B9%E6%AF%94" target="_self">2.3.4模糊查询方案对比</a></p> 
<p style="margin-left:40px"><a href="#2.4%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%B1%A0" target="_self">2.4数据库连接池</a></p> 
<p style="margin-left:80px"><a href="#2.4.1%E4%BB%8B%E7%BB%8D" target="_self">2.4.1介绍</a></p> 
<p style="margin-left:80px"><a href="#2.4.2%E4%BD%BF%E7%94%A8" target="_self">2.4.2使用</a></p> 
<p style="margin-left:120px"><a href="#2.4.2.1HikariCP%20%28%E6%80%A7%E8%83%BD%E7%8E%8B%E8%80%85%29" target="_self">2.4.2.1HikariCP (性能王者)</a></p> 
<p style="margin-left:120px"><a href="#2.4.2.2%C2%A0Druid%20%28%E7%9B%91%E6%8E%A7%E4%B9%8B%E7%8E%8B%29" target="_self">2.4.2.2 Druid (监控之王)</a></p> 
<p style="margin-left:120px"><a href="#2.4.2.3%E8%BF%9E%E6%8E%A5%E6%B1%A0%E5%AF%B9%E6%AF%94%EF%BC%9AHikariCP%20vs%20Druid" target="_self">2.4.2.3连接池对比：HikariCP vs Druid</a></p> 
<p style="margin-left:0px"><a href="#3.%E5%B0%8F%E7%BB%93" target="_self">3.小结</a></p> 
<hr> 
<h2><a name="t0"></a>1.前言</h2> 
<p>哈喽大家好吖，【MyBatis保姆级教程】上下篇已经将主要内容讲解完毕，剩下的仍然重要的部分我将放到杂谈篇进行讲解。众所周知，MyBatis数据库操作是后端开发的基石，但你是否常被这些问题困扰？</p> 
<ul><li> <p><strong>SQL注入攻击防不胜防，数据安全岌岌可危？</strong></p> </li><li> <p><strong>拼接动态SQL既麻烦又危险，容易出错且不安全？</strong></p> </li><li> <p><strong><code>LIKE '%keyword%'</code>模糊查询慢如蜗牛，用户体验糟糕？</strong></p> </li><li> <p><strong>连接池配置不当，高并发下性能骤降甚至连接耗尽？</strong></p> </li></ul> 
<p><strong>这篇实战指南，将直击这四大核心痛点，提供可落地的解决方案。</strong> 阅读后，你将能够：</p> 
<ol><li> <p><strong>彻底防御SQL注入：</strong> 掌握正确安全防注入的代码操作。</p> </li><li> <p><strong>编写安全的动态SQL：</strong> 学会安全、高效地构建复杂查询条件，避免手动拼接风险。</p> </li><li> <p><strong>显著优化模糊查询性能：</strong> 理解索引失效原因，应用实用优化技巧提升搜索速度。</p> </li><li> <p><strong>合理配置数据库连接池：</strong> 理解关键参数含义，根据负载进行调优，保障稳定高效。</p> </li></ol> 
<p>解决这些问题，你的应用将更安全、更快速、更稳定。下面进入正题：</p> 
<hr> 
<p><strong>插播一条消息~</strong></p> 
<p>🔍 <strong>十年经验淬炼 · 系统化AI学习平台推荐</strong></p> 
<p><a class="has-card" href="https://www.captainbed.cn/scy/" title="系统化学习AI平台" rel="nofollow"><span class="link-card-box" contenteditable="false"><span class="link-title">系统化学习AI平台</span><span class="link-link"><img alt=" " class="link-link-icon" src="https://csdnimg.cn/release/blog_editor_html/release2.3.9/ckeditor/plugins/CsdnLink/icons/icon-default.png?t=P4F5">https://www.captainbed.cn/scy/</span></span></a></p> 
<p>✅ <strong>为什么值得投入？</strong></p> 
<blockquote> 
 <ul><li>📚 <strong>完整知识体系：</strong>从数学基础 → 工业级项目（人脸识别/自动驾驶/GANs），内容由浅入深</li><li>💻 <strong>实战为王：</strong>每小节配套可运行代码案例（提供完整源码）</li><li>🎯 <strong>零基础友好：</strong>用生活案例讲解算法，无需担心数学/编程基础</li></ul> 
</blockquote> 
<p>🚀 <strong>特别适合</strong></p> 
<blockquote> 
 <ul><li>想系统补强AI知识的开发者</li><li>转型人工智能领域的从业者</li><li>需要项目经验的学生</li></ul> 
</blockquote> 
<hr> 
<h2><a name="t1"></a>2.正文</h2> 
<h3><a name="t2"></a>2.1区分${}与#{}</h3> 
<p><strong>核心区别总结</strong></p> 
<div class="table-box"><table><thead><tr><th>特性</th><th><code>#{}</code> (预编译/占位符)</th><th><code>${}</code> (字符串替换)</th></tr></thead><tbody><tr><td><strong>工作原理</strong></td><td>生成 <code>PreparedStatement</code>，使用 <code>?</code> 占位</td><td>直接拼接字符串到 SQL 语句中</td></tr><tr><td><strong>安全性</strong></td><td>✅ <strong>高</strong> (防止 SQL 注入)</td><td>❌ <strong>极低</strong> (存在 SQL 注入风险)</td></tr><tr><td><strong>性能</strong></td><td>✅ <strong>高</strong> (SQL 可被数据库缓存复用)</td><td>❌ <strong>低</strong> (每次需重新解析编译 SQL)</td></tr><tr><td><strong>适用场景</strong></td><td><strong>参数值传递</strong> (WHERE 值, INSERT 值等)</td><td><strong>动态表名/列名、ORDER BY 子句</strong> (需严格校验)</td></tr></tbody></table></div> 
<h4><a name="t3"></a>2.1.1SQL注入问题</h4> 
<p><strong>场景说明</strong></p> 
<p>假设有一个根据用户名查询用户的功能，攻击者输入恶意参数 <code>' OR '1'='1</code> 试图获取全部用户数据。</p> 
<p><strong>示例代码</strong></p> 
<p>2.1.1.1 使用 <code>${}</code> (存在注入漏洞)</p> 
<pre data-index="0" class="set-code-show new-version hljs" name="code"><code class="language-XML hljs"><ol class="hljs-ln" style="width:100%"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">&lt;!-- Mapper XML --&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"findUserByNameUnsafe"</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">"User"</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">  SELECT * FROM user WHERE name = '${name}'</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="4"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></div></div></li></ol></code><div class="opt-box"><button class="btn-code-notes ckeditor" style="background-image:url(https://i-operation.csdnimg.cn/images/a5fff6f6c9f0464c9a46b130c972952b.png);" data-report-click='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":0,"runIdx":-1}}'>AI写代码</button><span class="code-language" data-language="XML">XML</span><div class="hljs-button signin active" data-title="登录复制" data-report-click='{"spm":"1001.2101.3001.4334"}' onclick="hljs.signin(event)"></div></div></pre> 
<pre data-index="1" class="set-code-show new-version hljs" name="code"><code class="language-java hljs"><ol class="hljs-ln" style="width:100%"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">// Java 调用</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-type">String</span> <span class="hljs-variable">maliciousInput</span> <span class="hljs-operator">=</span> <span class="hljs-string">"' OR '1'='1"</span>;</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">List&lt;User&gt; users = userMapper.findUserByNameUnsafe(maliciousInput);</div></div></li></ol></code><div class="opt-box"><button class="btn-code-notes ckeditor" style="background-image:url(https://i-operation.csdnimg.cn/images/a5fff6f6c9f0464c9a46b130c972952b.png);" data-report-view='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":1,"runIdx":-1}}' data-report-click='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":1,"runIdx":-1}}'>AI写代码</button><span class="code-language" data-language="java">java</span><div class="hljs-button signin active" data-title="登录复制" data-report-click='{"spm":"1001.2101.3001.4334"}' onclick="hljs.signin(event)"></div><span class="code-run-btn" data-idx="1" data-report-view='{"spm":"3001.10758","extra":{"language":"java", "idx":"1"}}' data-language="java">运行</span></div></pre> 
<p> <strong>最终执行的 SQL：</strong></p> 
<pre data-index="2" class="set-code-show new-version hljs" name="code"><code class="language-java hljs">SELECT * FROM user <span class="hljs-type">WHERE</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> <span class="hljs-string">''</span> OR <span class="hljs-string">'1'</span>=<span class="hljs-string">'1'</span></code><div class="opt-box"><button class="btn-code-notes ckeditor" style="background-image:url(https://i-operation.csdnimg.cn/images/a5fff6f6c9f0464c9a46b130c972952b.png);" data-report-view='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":2,"runIdx":-1}}' data-report-click='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":2,"runIdx":-1}}'>AI写代码</button><span class="code-language" data-language="java">java</span><div class="hljs-button signin active" data-title="登录复制" data-report-click='{"spm":"1001.2101.3001.4334"}' onclick="hljs.signin(event)"></div><span class="code-run-btn" data-idx="2" data-report-view='{"spm":"3001.10758","extra":{"language":"java", "idx":"2"}}' data-language="java">运行</span></div></pre> 
<blockquote> 
 <p><strong>✅ 运行结果：</strong> 返回 <code>user</code> 表中<strong>所有用户数据</strong>（<code>'1'='1'</code> 永远为真）。<br> <strong>💥 风险：</strong> 数据库被非法拖库！ </p> 
</blockquote> 
<hr> 
<p>2.1.1.2 使用 <code>#{}</code> (安全防注入)</p> 
<pre data-index="3" class="set-code-show new-version hljs" name="code"><code class="language-XML hljs"><ol class="hljs-ln" style="width:100%"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">&lt;!-- Mapper XML --&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"findUserByNameSafe"</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">"User"</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">  SELECT * FROM user WHERE name = #{name}</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="4"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></div></div></li></ol></code><div class="opt-box"><button class="btn-code-notes ckeditor" style="background-image:url(https://i-operation.csdnimg.cn/images/a5fff6f6c9f0464c9a46b130c972952b.png);" data-report-view='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":3,"runIdx":-1}}' data-report-click='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":3,"runIdx":-1}}'>AI写代码</button><span class="code-language" data-language="XML">XML</span><div class="hljs-button signin active" data-title="登录复制" data-report-click='{"spm":"1001.2101.3001.4334"}' onclick="hljs.signin(event)"></div></div></pre> 
<pre data-index="4" class="set-code-show new-version hljs" name="code"><code class="language-java hljs"><ol class="hljs-ln" style="width:100%"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">// Java 调用</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-type">String</span> <span class="hljs-variable">maliciousInput</span> <span class="hljs-operator">=</span> <span class="hljs-string">"' OR '1'='1"</span>;</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">List&lt;User&gt; users = userMapper.findUserByNameSafe(maliciousInput);</div></div></li></ol></code><div class="opt-box"><button class="btn-code-notes ckeditor" style="background-image:url(https://i-operation.csdnimg.cn/images/a5fff6f6c9f0464c9a46b130c972952b.png);" data-report-view='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":4,"runIdx":-1}}' data-report-click='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":4,"runIdx":-1}}'>AI写代码</button><span class="code-language" data-language="java">java</span><div class="hljs-button signin active" data-title="登录复制" data-report-click='{"spm":"1001.2101.3001.4334"}' onclick="hljs.signin(event)"></div><span class="code-run-btn" data-idx="4" data-report-view='{"spm":"3001.10758","extra":{"language":"java", "idx":"4"}}' data-language="java">运行</span></div></pre> 
<p> <strong>最终执行的 SQL：</strong></p> 
<pre data-index="5" class="set-code-show new-version hljs" name="code"><code class="language-java hljs">SELECT * FROM user <span class="hljs-type">WHERE</span> <span class="hljs-variable">name</span> <span class="hljs-operator">=</span> ?</code><div class="opt-box"><button class="btn-code-notes ckeditor" style="background-image:url(https://i-operation.csdnimg.cn/images/a5fff6f6c9f0464c9a46b130c972952b.png);" data-report-view='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":5,"runIdx":-1}}' data-report-click='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":5,"runIdx":-1}}'>AI写代码</button><span class="code-language" data-language="java">java</span><div class="hljs-button signin active" data-title="登录复制" data-report-click='{"spm":"1001.2101.3001.4334"}' onclick="hljs.signin(event)"></div><span class="code-run-btn" data-idx="5" data-report-view='{"spm":"3001.10758","extra":{"language":"java", "idx":"5"}}' data-language="java">运行</span></div></pre> 
<blockquote> 
 <p><strong>参数值：</strong> <code>"' OR '1'='1"</code>（作为整体字符串传入）<br> <strong>✅ 运行结果：</strong> 查询 <code>name = "' OR '1'='1"</code> 的用户 → <strong>返回空列表</strong>。<br> <strong>🔒 安全：</strong> 恶意代码被当作普通字符串处理，无法改变 SQL 结构！ </p> 
</blockquote> 
<h4><a name="t4"></a>2.1.2<a href="https://so.csdn.net/so/search?q=%E9%A2%84%E7%BC%96%E8%AF%91&amp;spm=1001.2101.3001.7020" target="_blank" class="hl hl-1" data-report-view='{"spm":"1001.2101.3001.7020","dest":"https://so.csdn.net/so/search?q=%E9%A2%84%E7%BC%96%E8%AF%91&amp;spm=1001.2101.3001.7020","extra":"{\"searchword\":\"预编译\"}"}' data-report-click='{"spm":"1001.2101.3001.7020","dest":"https://so.csdn.net/so/search?q=%E9%A2%84%E7%BC%96%E8%AF%91&amp;spm=1001.2101.3001.7020","extra":"{\"searchword\":\"预编译\"}"}' data-tit="预编译" data-pretit="预编译">预编译</a>SQL与即时间SQL</h4> 
<p><strong>2.1.2.1 <code>#{}</code> 工作原理 (预编译 SQL)</strong></p> 
<ol><li> <p><strong>Step 1:</strong> MyBatis 解析 SQL，将 <code>#{name}</code> 替换为 <code>?</code>。</p> <pre data-index="6" class="set-code-show new-version hljs" name="code"><code class="language-sql hljs"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">WHERE</span> name <span class="hljs-operator">=</span> ?</code><div class="opt-box"><button class="btn-code-notes ckeditor" style="background-image:url(https://i-operation.csdnimg.cn/images/a5fff6f6c9f0464c9a46b130c972952b.png);" data-report-view='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":6,"runIdx":-1}}' data-report-click='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":6,"runIdx":-1}}'>AI写代码</button><span class="code-language" data-language="sql">sql</span><div class="hljs-button signin active" data-title="登录复制" data-report-click='{"spm":"1001.2101.3001.4334"}' onclick="hljs.signin(event)"></div></div></pre> </li><li> <p><strong>Step 2:</strong> 将 SQL 发送到数据库 <strong>预编译</strong>（生成执行计划）。</p> </li><li> <p><strong>Step 3:</strong> 执行时传入参数值 <code>"' OR '1'='1"</code>，数据库将其作为<strong>纯字符串</strong>处理。</p> </li></ol> 
<p><strong>✅ 优势：</strong></p> 
<ul><li> <p>防 SQL 注入（参数值无法改变 SQL 结构）。</p> </li><li> <p>高性能（预编译 SQL 可被数据库缓存复用）。</p> </li></ul> 
<hr> 
<p><strong>2.1.2.2<code>${}</code> 工作原理 (即时间 SQL)</strong></p> 
<ol><li> <p><strong>Step 1:</strong> MyBatis 直接拼接字符串：</p> <pre data-index="7" class="set-code-show new-version hljs" name="code"><code class="language-sql hljs"><span class="hljs-keyword">SELECT</span> <span class="hljs-operator">*</span> <span class="hljs-keyword">FROM</span> <span class="hljs-keyword">user</span> <span class="hljs-keyword">WHERE</span> name <span class="hljs-operator">=</span> <span class="hljs-string">''</span> <span class="hljs-keyword">OR</span> <span class="hljs-string">'1'</span><span class="hljs-operator">=</span><span class="hljs-string">'1'</span></code><div class="opt-box"><button class="btn-code-notes ckeditor" style="background-image:url(https://i-operation.csdnimg.cn/images/a5fff6f6c9f0464c9a46b130c972952b.png);" data-report-view='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":7,"runIdx":-1}}' data-report-click='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":7,"runIdx":-1}}'>AI写代码</button><span class="code-language" data-language="sql">sql</span><div class="hljs-button signin active" data-title="登录复制" data-report-click='{"spm":"1001.2101.3001.4334"}' onclick="hljs.signin(event)"></div></div></pre> </li><li> <p><strong>Step 2:</strong> 每次执行都会生成<strong>全新的 SQL</strong> 发送到数据库。</p> </li><li> <p><strong>Step 3:</strong> 数据库每次都需要<strong>重新解析、编译、执行</strong>。</p> </li></ol> 
<p><strong>❌ 风险与代价：</strong></p> 
<ul><li> <p>引发 SQL 注入（用户输入可改变 SQL 语义）。</p> </li><li> <p>性能低下（无法复用执行计划）。</p> </li></ul> 
<hr> 
<h4><a name="t5"></a><strong>2.1.3${} 的正确使用场景与避坑指南</strong></h4> 
<p><strong>2.1.3.1场景：动态排序字段 (ORDER BY)</strong></p> 
<pre data-index="8" class="set-code-show new-version hljs" name="code"><code class="language-XML hljs"><ol class="hljs-ln" style="width:100%"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"findUsersOrdered"</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">"User"</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">  SELECT * FROM user</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">  ORDER BY ${sortField} ${sortOrder}</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="4"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></div></div></li></ol></code><div class="opt-box"><button class="btn-code-notes ckeditor" style="background-image:url(https://i-operation.csdnimg.cn/images/a5fff6f6c9f0464c9a46b130c972952b.png);" data-report-view='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":8,"runIdx":-1}}' data-report-click='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":8,"runIdx":-1}}'>AI写代码</button><span class="code-language" data-language="XML">XML</span><div class="hljs-button signin active" data-title="登录复制" data-report-click='{"spm":"1001.2101.3001.4334"}' onclick="hljs.signin(event)"></div></div></pre> 
<p><strong>2.1.3.2避坑措施：白名单校验 (Java 层)</strong></p> 
<pre data-index="9" class="set-code-show new-version hljs" name="code"><code class="language-java hljs"><ol class="hljs-ln" style="width:100%"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">// Service 层校验排序字段</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title function_">getUsersOrdered</span><span class="hljs-params">(String sortField, String sortOrder)</span> {</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-comment">// 定义允许的字段 (白名单)</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="4"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    Set&lt;String&gt; validFields = Set.of(<span class="hljs-string">"id"</span>, <span class="hljs-string">"name"</span>, <span class="hljs-string">"create_time"</span>);</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="5"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    Set&lt;String&gt; validOrders = Set.of(<span class="hljs-string">"ASC"</span>, <span class="hljs-string">"DESC"</span>);</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="6"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"> </div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="7"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-keyword">if</span> (!validFields.contains(sortField)) {</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="8"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        sortField = <span class="hljs-string">"id"</span>; <span class="hljs-comment">// 默认字段</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="9"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    }</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="10"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-keyword">if</span> (!validOrders.contains(sortOrder)) {</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="11"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        sortOrder = <span class="hljs-string">"ASC"</span>; <span class="hljs-comment">// 默认排序</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="12"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    }</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="13"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-keyword">return</span> userMapper.findUsersOrdered(sortField, sortOrder);</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="14"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">}</div></div></li></ol></code><div class="opt-box"><button class="btn-code-notes ckeditor" style="background-image:url(https://i-operation.csdnimg.cn/images/a5fff6f6c9f0464c9a46b130c972952b.png);" data-report-view='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":9,"runIdx":-1}}' data-report-click='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":9,"runIdx":-1}}'>AI写代码</button><span class="code-language" data-language="java">java</span><div class="hljs-button signin active" data-title="登录复制" data-report-click='{"spm":"1001.2101.3001.4334"}' onclick="hljs.signin(event)"></div><span class="code-run-btn" data-idx="9" data-report-view='{"spm":"3001.10758","extra":{"language":"java", "idx":"9"}}' data-language="java">运行</span></div></pre> 
<p><strong>2.1.3.3执行示例</strong></p> 
<pre data-index="10" class="set-code-show new-version hljs" name="code"><code class="language-java hljs"><ol class="hljs-ln" style="width:100%"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">// 正常调用</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">getUsersOrdered(<span class="hljs-string">"name"</span>, <span class="hljs-string">"DESC"</span>); </div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">// SQL: SELECT * FROM user ORDER BY name DESC</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="4"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"> </div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="5"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">// 攻击尝试</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="6"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">getUsersOrdered(<span class="hljs-string">"(SELECT 1 FROM DUAL); DROP TABLE user; --"</span>, <span class="hljs-string">"DESC"</span>);</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="7"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">// 白名单过滤 → SQL: SELECT * FROM user ORDER BY id ASC ✅</span></div></div></li></ol></code><div class="opt-box"><button class="btn-code-notes ckeditor" style="background-image:url(https://i-operation.csdnimg.cn/images/a5fff6f6c9f0464c9a46b130c972952b.png);" data-report-view='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":10,"runIdx":-1}}' data-report-click='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":10,"runIdx":-1}}'>AI写代码</button><span class="code-language" data-language="java">java</span><div class="hljs-button signin active" data-title="登录复制" data-report-click='{"spm":"1001.2101.3001.4334"}' onclick="hljs.signin(event)"></div><span class="code-run-btn" data-idx="10" data-report-view='{"spm":"3001.10758","extra":{"language":"java", "idx":"10"}}' data-language="java">运行</span></div></pre> 
<hr> 
<h4><a name="t6"></a><strong>2.1.4关键结论</strong></h4> 
<blockquote> 
 <ol><li> <p><strong><code>#{}</code> 用于值传递</strong>：安全可靠，99% 场景使用它。</p> </li><li> <p><strong><code>${}</code> 用于 SQL 片段</strong>：仅用于动态表名、列名、排序字段（必须配合白名单校验）。</p> </li><li> <p><strong>禁止 <code>${}</code> 拼接用户输入</strong>：否则等于敞开大门欢迎 <a href="https://so.csdn.net/so/search?q=SQL%20%E6%B3%A8%E5%85%A5%E6%94%BB%E5%87%BB&amp;spm=1001.2101.3001.7020" target="_blank" class="hl hl-1" data-report-view='{"spm":"1001.2101.3001.7020","dest":"https://so.csdn.net/so/search?q=SQL%20%E6%B3%A8%E5%85%A5%E6%94%BB%E5%87%BB&amp;spm=1001.2101.3001.7020","extra":"{\"searchword\":\"SQL' data-report-click='{"spm":"1001.2101.3001.7020","dest":"https://so.csdn.net/so/search?q=SQL%20%E6%B3%A8%E5%85%A5%E6%94%BB%E5%87%BB&amp;spm=1001.2101.3001.7020","extra":"{\"searchword\":\"SQL' data-tit="SQL" data-pretit="sql">SQL 注入攻击</a>。</p> </li><li> <p><strong>预编译是性能与安全的基石</strong>：永远优先选择 <code>#{}</code>！</p> </li></ol> 
</blockquote> 
<h3><a name="t7"></a>2.2动态SQL</h3> 
<p><strong>什么是动态 SQL？</strong></p> 
<p>动态 SQL 是 MyBatis 最强大的特性之一，它允许根据运行时条件<strong>动态构建 SQL 语句</strong>。通过条件判断、循环等逻辑，可以避免编写大量重复 SQL，提高代码复用性和灵活性。</p> 
<hr> 
<h4><a name="t8"></a>2.2.1&lt;if&gt;标签</h4> 
<p><strong>XML</strong></p> 
<pre data-index="11" class="set-code-show new-version hljs" name="code"><code class="language-XML hljs"><ol class="hljs-ln" style="width:100%"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"findUsers"</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">"User"</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">  SELECT * FROM user</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">  WHERE 1=1</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="4"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"name != null"</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="5"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    AND name = #{name}</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="6"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">  <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="7"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"email != null"</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="8"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    AND email = #{email}</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="9"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">  <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="10"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></div></div></li></ol></code><div class="opt-box"><button class="btn-code-notes ckeditor" style="background-image:url(https://i-operation.csdnimg.cn/images/a5fff6f6c9f0464c9a46b130c972952b.png);" data-report-view='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":11,"runIdx":-1}}' data-report-click='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":11,"runIdx":-1}}'>AI写代码</button><span class="code-language" data-language="XML">XML</span><div class="hljs-button signin active" data-title="登录复制" data-report-click='{"spm":"1001.2101.3001.4334"}' onclick="hljs.signin(event)"></div></div></pre> 
<p> <strong>执行示例：</strong></p> 
<pre data-index="12" class="set-code-show new-version hljs" name="code"><code class="language-java hljs"><ol class="hljs-ln" style="width:771px"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">// 只传 name</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">mapper.findUsers(<span class="hljs-string">"Alice"</span>, <span class="hljs-literal">null</span>);</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">// SQL: SELECT * FROM user WHERE 1=1 AND name = 'Alice'</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="4"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"> </div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="5"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">// 传 name 和 email</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="6"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">mapper.findUsers(<span class="hljs-string">"Bob"</span>, <span class="hljs-string">"bob@example.com"</span>);</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="7"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">// SQL: SELECT * FROM user WHERE 1=1 AND name = 'Bob' AND email = 'bob@example.com'</span></div></div></li></ol></code><div class="opt-box"><button class="btn-code-notes ckeditor" style="background-image:url(https://i-operation.csdnimg.cn/images/a5fff6f6c9f0464c9a46b130c972952b.png);" data-report-view='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":12,"runIdx":-1}}' data-report-click='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":12,"runIdx":-1}}'>AI写代码</button><span class="code-language" data-language="java">java</span><div class="hljs-button signin active" data-title="登录复制" data-report-click='{"spm":"1001.2101.3001.4334"}' onclick="hljs.signin(event)"></div><span class="code-run-btn" data-idx="12" data-report-view='{"spm":"3001.10758","extra":{"language":"java", "idx":"12"}}' data-language="java">运行</span></div></pre> 
<hr> 
<h4><a name="t9"></a>2.2.2&lt;choose&gt;&lt;when&gt;&lt;otherwise&gt;标签（类似switch-case）</h4> 
<p><strong>XML</strong></p> 
<pre data-index="13" class="set-code-show new-version hljs" name="code"><code class="language-XML hljs"><ol class="hljs-ln" style="width:100%"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"searchUsers"</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">"User"</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">  SELECT * FROM user</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">  WHERE</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="4"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">choose</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="5"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">when</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"id != null"</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="6"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">      id = #{id}</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="7"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;/<span class="hljs-name">when</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="8"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">when</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"name != null"</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="9"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">      name LIKE CONCAT('%', #{name}, '%')</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="10"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;/<span class="hljs-name">when</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="11"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">otherwise</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="12"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">      status = 'ACTIVE'</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="13"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;/<span class="hljs-name">otherwise</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="14"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">  <span class="hljs-tag">&lt;/<span class="hljs-name">choose</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="15"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></div></div></li></ol></code><div class="opt-box"><button class="btn-code-notes ckeditor" style="background-image:url(https://i-operation.csdnimg.cn/images/a5fff6f6c9f0464c9a46b130c972952b.png);" data-report-view='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":13,"runIdx":-1}}' data-report-click='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":13,"runIdx":-1}}'>AI写代码</button><span class="code-language" data-language="XML">XML</span><div class="hljs-button signin active" data-title="登录复制" data-report-click='{"spm":"1001.2101.3001.4334"}' onclick="hljs.signin(event)"></div></div></pre> 
<p><strong>执行示例：</strong></p> 
<pre data-index="14" class="set-code-show new-version hljs" name="code"><code class="language-java hljs"><ol class="hljs-ln" style="width:100%"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">// 传 id</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">mapper.searchUsers(<span class="hljs-number">1001</span>, <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>);</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">// SQL: SELECT * FROM user WHERE id = 1001</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="4"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"> </div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="5"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">// 传 name</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="6"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">mapper.searchUsers(<span class="hljs-literal">null</span>, <span class="hljs-string">"John"</span>, <span class="hljs-literal">null</span>);</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="7"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">// SQL: SELECT * FROM user WHERE name LIKE '%John%'</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="8"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"> </div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="9"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">// 不传参数</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="10"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">mapper.searchUsers(<span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>, <span class="hljs-literal">null</span>);</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="11"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">// SQL: SELECT * FROM user WHERE status = 'ACTIVE'</span></div></div></li></ol></code><div class="opt-box"><button class="btn-code-notes ckeditor" style="background-image:url(https://i-operation.csdnimg.cn/images/a5fff6f6c9f0464c9a46b130c972952b.png);" data-report-view='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":14,"runIdx":-1}}' data-report-click='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":14,"runIdx":-1}}'>AI写代码</button><span class="code-language" data-language="java">java</span><div class="hljs-button signin active" data-title="登录复制" data-report-click='{"spm":"1001.2101.3001.4334"}' onclick="hljs.signin(event)"></div><span class="code-run-btn" data-idx="14" data-report-view='{"spm":"3001.10758","extra":{"language":"java", "idx":"14"}}' data-language="java">运行</span></div></pre> 
<hr> 
<h4><a name="t10"></a>2.2.3&lt;where&gt;标签</h4> 
<p><strong>解决条件前缀问题</strong>（自动处理 AND/OR）</p> 
<p><strong>XML</strong></p> 
<pre data-index="15" class="set-code-show new-version hljs" name="code"><code class="language-XML hljs"><ol class="hljs-ln" style="width:100%"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"findActiveUsers"</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">"User"</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">  SELECT * FROM user</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">where</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="4"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"name != null"</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="5"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">      name = #{name}</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="6"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="7"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"role != null"</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="8"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">      AND role = #{role}</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="9"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="10"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">  <span class="hljs-tag">&lt;/<span class="hljs-name">where</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="11"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></div></div></li></ol></code><div class="opt-box"><button class="btn-code-notes ckeditor" style="background-image:url(https://i-operation.csdnimg.cn/images/a5fff6f6c9f0464c9a46b130c972952b.png);" data-report-view='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":15,"runIdx":-1}}' data-report-click='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":15,"runIdx":-1}}'>AI写代码</button><span class="code-language" data-language="XML">XML</span><div class="hljs-button signin active" data-title="登录复制" data-report-click='{"spm":"1001.2101.3001.4334"}' onclick="hljs.signin(event)"></div></div></pre> 
<p><strong>优势：</strong></p> 
<ul><li> <p>自动删除首个条件前的 AND/OR</p> </li><li> <p>当所有条件为空时，不生成 WHERE 关键字</p> </li><li> <p>避免 <code>WHERE 1=1</code> 这种不优雅的写法</p> </li></ul> 
<hr> 
<h4><a name="t11"></a>2.2.4&lt;set&gt;标签</h4> 
<p><strong>XML</strong></p> 
<pre data-index="16" class="set-code-show new-version hljs" name="code"><code class="language-XML hljs"><ol class="hljs-ln" style="width:100%"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">update</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"updateUser"</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">  UPDATE user</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">set</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="4"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"name != null"</span>&gt;</span>name=#{name},<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="5"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"email != null"</span>&gt;</span>email=#{email},<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="6"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"role != null"</span>&gt;</span>role=#{role}<span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="7"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">  <span class="hljs-tag">&lt;/<span class="hljs-name">set</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="8"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">  WHERE id=#{id}</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="9"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-tag">&lt;/<span class="hljs-name">update</span>&gt;</span></div></div></li></ol></code><div class="opt-box"><button class="btn-code-notes ckeditor" style="background-image:url(https://i-operation.csdnimg.cn/images/a5fff6f6c9f0464c9a46b130c972952b.png);" data-report-view='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":16,"runIdx":-1}}' data-report-click='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":16,"runIdx":-1}}'>AI写代码</button><span class="code-language" data-language="XML">XML</span><div class="hljs-button signin active" data-title="登录复制" data-report-click='{"spm":"1001.2101.3001.4334"}' onclick="hljs.signin(event)"></div></div></pre> 
<p><strong>执行示例：</strong></p> 
<pre data-index="17" class="set-code-show new-version hljs" name="code"><code class="language-java hljs"><ol class="hljs-ln" style="width:100%"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">// 只更新 email</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-type">User</span> <span class="hljs-variable">user</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>();</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">user.setId(<span class="hljs-number">1001</span>);</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="4"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">user.setEmail(<span class="hljs-string">"new@example.com"</span>);</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="5"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">mapper.updateUser(user);</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="6"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"> </div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="7"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">// SQL: UPDATE user SET email='new@example.com' WHERE id=1001</span></div></div></li></ol></code><div class="opt-box"><button class="btn-code-notes ckeditor" style="background-image:url(https://i-operation.csdnimg.cn/images/a5fff6f6c9f0464c9a46b130c972952b.png);" data-report-view='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":17,"runIdx":-1}}' data-report-click='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":17,"runIdx":-1}}'>AI写代码</button><span class="code-language" data-language="java">java</span><div class="hljs-button signin active" data-title="登录复制" data-report-click='{"spm":"1001.2101.3001.4334"}' onclick="hljs.signin(event)"></div><span class="code-run-btn" data-idx="17" data-report-view='{"spm":"3001.10758","extra":{"language":"java", "idx":"17"}}' data-language="java">运行</span></div></pre> 
<p><strong>特点：</strong> 自动去除末尾多余的逗号 </p> 
<h4><a name="t12"></a>2.2.5&lt;foreach&gt;标签</h4> 
<p><strong>场景 1：IN 查询</strong></p> 
<p><strong>XML</strong></p> 
<pre data-index="18" class="set-code-show new-version hljs" name="code"><code class="language-XML hljs"><ol class="hljs-ln" style="width:100%"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"findUsersByIds"</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">"User"</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">  SELECT * FROM user</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">  WHERE id IN</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="4"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">foreach</span> <span class="hljs-attr">item</span>=<span class="hljs-string">"id"</span> <span class="hljs-attr">collection</span>=<span class="hljs-string">"ids"</span> </span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="5"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">           <span class="hljs-attr">open</span>=<span class="hljs-string">"("</span> <span class="hljs-attr">separator</span>=<span class="hljs-string">","</span> <span class="hljs-attr">close</span>=<span class="hljs-string">")"</span>&gt;</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="6"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    #{id}</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="7"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">  <span class="hljs-tag">&lt;/<span class="hljs-name">foreach</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="8"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></div></div></li></ol></code><div class="opt-box"><button class="btn-code-notes ckeditor" style="background-image:url(https://i-operation.csdnimg.cn/images/a5fff6f6c9f0464c9a46b130c972952b.png);" data-report-view='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":18,"runIdx":-1}}' data-report-click='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":18,"runIdx":-1}}'>AI写代码</button><span class="code-language" data-language="XML">XML</span><div class="hljs-button signin active" data-title="登录复制" data-report-click='{"spm":"1001.2101.3001.4334"}' onclick="hljs.signin(event)"></div></div></pre> 
<p><strong>执行示例：</strong></p> 
<pre data-index="19" class="set-code-show new-version hljs" name="code"><code class="language-java hljs"><ol class="hljs-ln" style="width:100%"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">List&lt;Integer&gt; ids = Arrays.asList(<span class="hljs-number">101</span>, <span class="hljs-number">102</span>, <span class="hljs-number">103</span>);</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">mapper.findUsersByIds(ids);</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">// SQL: SELECT * FROM user WHERE id IN (101,102,103)</span></div></div></li></ol></code><div class="opt-box"><button class="btn-code-notes ckeditor" style="background-image:url(https://i-operation.csdnimg.cn/images/a5fff6f6c9f0464c9a46b130c972952b.png);" data-report-view='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":19,"runIdx":-1}}' data-report-click='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":19,"runIdx":-1}}'>AI写代码</button><span class="code-language" data-language="java">java</span><div class="hljs-button signin active" data-title="登录复制" data-report-click='{"spm":"1001.2101.3001.4334"}' onclick="hljs.signin(event)"></div><span class="code-run-btn" data-idx="19" data-report-view='{"spm":"3001.10758","extra":{"language":"java", "idx":"19"}}' data-language="java">运行</span></div></pre> 
<p><strong>场景 2：批量插入</strong></p> 
<p><strong>XML</strong></p> 
<pre data-index="20" class="set-code-show new-version hljs" name="code"><code class="language-XML hljs"><ol class="hljs-ln" style="width:100%"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">insert</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"batchInsert"</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">  INSERT INTO user (name, email) VALUES</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">foreach</span> <span class="hljs-attr">item</span>=<span class="hljs-string">"user"</span> <span class="hljs-attr">collection</span>=<span class="hljs-string">"users"</span> <span class="hljs-attr">separator</span>=<span class="hljs-string">","</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="4"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    (#{user.name}, #{user.email})</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="5"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">  <span class="hljs-tag">&lt;/<span class="hljs-name">foreach</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="6"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-tag">&lt;/<span class="hljs-name">insert</span>&gt;</span></div></div></li></ol></code><div class="opt-box"><button class="btn-code-notes ckeditor" style="background-image:url(https://i-operation.csdnimg.cn/images/a5fff6f6c9f0464c9a46b130c972952b.png);" data-report-view='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":20,"runIdx":-1}}' data-report-click='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":20,"runIdx":-1}}'>AI写代码</button><span class="code-language" data-language="XML">XML</span><div class="hljs-button signin active" data-title="登录复制" data-report-click='{"spm":"1001.2101.3001.4334"}' onclick="hljs.signin(event)"></div></div></pre> 
<p> <strong>执行示例：</strong></p> 
<pre data-index="21" class="set-code-show new-version hljs" name="code"><code class="language-java hljs"><ol class="hljs-ln" style="width:100%"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">INSERT INTO <span class="hljs-title function_">user</span> <span class="hljs-params">(name, email)</span> VALUES</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">(<span class="hljs-string">'Alice'</span>,<span class="hljs-string">'alice@test.com'</span>),</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">(<span class="hljs-string">'Bob'</span>,<span class="hljs-string">'bob@test.com'</span>),</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="4"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">(<span class="hljs-string">'Charlie'</span>,<span class="hljs-string">'charlie@test.com'</span>)</div></div></li></ol></code><div class="opt-box"><button class="btn-code-notes ckeditor" style="background-image:url(https://i-operation.csdnimg.cn/images/a5fff6f6c9f0464c9a46b130c972952b.png);" data-report-view='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":21,"runIdx":-1}}' data-report-click='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":21,"runIdx":-1}}'>AI写代码</button><span class="code-language" data-language="java">java</span><div class="hljs-button signin active" data-title="登录复制" data-report-click='{"spm":"1001.2101.3001.4334"}' onclick="hljs.signin(event)"></div><span class="code-run-btn" data-idx="21" data-report-view='{"spm":"3001.10758","extra":{"language":"java", "idx":"21"}}' data-language="java">运行</span></div></pre> 
<hr> 
<h4><a name="t13"></a>2.2.6&lt;trim&gt;标签</h4> 
<p><strong>功能：</strong> 更灵活地处理前缀/后缀</p> 
<p><strong>XML</strong></p> 
<pre data-index="22" class="set-code-show new-version hljs" name="code"><code class="language-XML hljs"><ol class="hljs-ln" style="width:100%"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"dynamicSearch"</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">"User"</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">  SELECT * FROM user</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">trim</span> <span class="hljs-attr">prefix</span>=<span class="hljs-string">"WHERE"</span> <span class="hljs-attr">prefixOverrides</span>=<span class="hljs-string">"AND |OR "</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="4"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"name != null"</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="5"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">      AND name = #{name}</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="6"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="7"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;<span class="hljs-name">if</span> <span class="hljs-attr">test</span>=<span class="hljs-string">"role != null"</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="8"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">      OR role = #{role}</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="9"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-tag">&lt;/<span class="hljs-name">if</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="10"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">  <span class="hljs-tag">&lt;/<span class="hljs-name">trim</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="11"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></div></div></li></ol></code><div class="opt-box"><button class="btn-code-notes ckeditor" style="background-image:url(https://i-operation.csdnimg.cn/images/a5fff6f6c9f0464c9a46b130c972952b.png);" data-report-view='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":22,"runIdx":-1}}' data-report-click='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":22,"runIdx":-1}}'>AI写代码</button><span class="code-language" data-language="XML">XML</span><div class="hljs-button signin active" data-title="登录复制" data-report-click='{"spm":"1001.2101.3001.4334"}' onclick="hljs.signin(event)"></div></div></pre> 
<p><strong>参数说明：</strong></p> 
<ul><li> <p><code>prefix</code>：添加前缀</p> </li><li> <p><code>prefixOverrides</code>：删除指定的前缀（支持正则）</p> </li><li> <p><code>suffix</code>：添加后缀</p> </li><li> <p><code>suffixOverrides</code>：删除指定的后缀</p> </li></ul> 
<hr> 
<p><strong>动态SQL总结</strong></p> 
<div class="table-box"><table><thead><tr><th>场景</th><th>推荐方案</th><th>优势</th></tr></thead><tbody><tr><td><strong>条件查询</strong></td><td><code>&lt;where&gt;</code> + <code>&lt;if&gt;</code></td><td>智能处理 AND/OR</td></tr><tr><td><strong>动态更新</strong></td><td><code>&lt;set&gt;</code></td><td>自动处理逗号</td></tr><tr><td><strong>多路分支</strong></td><td><code>&lt;choose&gt;/&lt;when&gt;</code></td><td>类似 switch-case 结构</td></tr><tr><td><strong>批量操作</strong></td><td><code>&lt;foreach&gt;</code></td><td>高效处理集合</td></tr><tr><td><strong>复杂条件</strong></td><td><code>&lt;trim&gt;</code></td><td>自定义字符串修剪</td></tr><tr><td><strong>SQL 片段复用</strong></td><td><code>&lt;sql&gt;</code> + <code>&lt;include&gt;</code></td><td>减少重复代码</td></tr><tr><td><strong>动态排序</strong></td><td><code>&lt;choose&gt;</code> 或 <code>&lt;foreach&gt;</code></td><td>安全实现 ORDER BY</td></tr></tbody></table></div> 
<blockquote> 
 <p><strong>最佳实践</strong>：动态 SQL 应保持简洁可读，超过 10 行的动态 SQL 建议拆分为多个方法或使用注解方式实现。</p> 
</blockquote> 
<h3><a name="t14"></a>2.3like查询（模糊查询）</h3> 
<p><strong>问题核心</strong></p> 
<ul><li> <p><strong>直接拼接导致错误</strong>：<code>LIKE #{value}</code> → <code>LIKE ?</code>（需值为<code>%value%</code>）</p> </li><li> <p><strong><code>${}</code> 有注入风险</strong>：<code>LIKE '%${value}%'</code> 不安全</p> </li></ul> 
<h4><a name="t15"></a>2.3.1使用拼接符</h4> 
<pre data-index="23" class="set-code-show new-version hljs" name="code"><code class="language-java hljs"><ol class="hljs-ln" style="width:100%"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">// Service层处理</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-keyword">public</span> List&lt;User&gt; <span class="hljs-title function_">searchUsers</span><span class="hljs-params">(String keyword)</span> {</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-type">String</span> <span class="hljs-variable">searchTerm</span> <span class="hljs-operator">=</span> <span class="hljs-string">"%"</span> + keyword + <span class="hljs-string">"%"</span>;  <span class="hljs-comment">// 添加通配符</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="4"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    <span class="hljs-keyword">return</span> userMapper.findByNameLike(searchTerm);</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="5"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">}</div></div></li></ol></code><div class="opt-box"><button class="btn-code-notes ckeditor" style="background-image:url(https://i-operation.csdnimg.cn/images/a5fff6f6c9f0464c9a46b130c972952b.png);" data-report-view='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":23,"runIdx":-1}}' data-report-click='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":23,"runIdx":-1}}'>AI写代码</button><span class="code-language" data-language="java">java</span><div class="hljs-button signin active" data-title="登录复制" data-report-click='{"spm":"1001.2101.3001.4334"}' onclick="hljs.signin(event)"></div><span class="code-run-btn" data-idx="23" data-report-view='{"spm":"3001.10758","extra":{"language":"java", "idx":"23"}}' data-language="java">运行</span></div></pre> 
<pre data-index="24" class="set-code-show new-version hljs" name="code"><code class="language-XML hljs"><ol class="hljs-ln" style="width:100%"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">&lt;!-- Mapper XML --&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"findByNameLike"</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">"User"</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">  SELECT * FROM user </div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="4"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">  WHERE name LIKE #{pattern}</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="5"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></div></div></li></ol></code><div class="opt-box"><button class="btn-code-notes ckeditor" style="background-image:url(https://i-operation.csdnimg.cn/images/a5fff6f6c9f0464c9a46b130c972952b.png);" data-report-view='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":24,"runIdx":-1}}' data-report-click='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":24,"runIdx":-1}}'>AI写代码</button><span class="code-language" data-language="XML">XML</span><div class="hljs-button signin active" data-title="登录复制" data-report-click='{"spm":"1001.2101.3001.4334"}' onclick="hljs.signin(event)"></div></div></pre> 
<p> <strong>✅ 执行结果：</strong></p> 
<pre data-index="25" class="set-code-show new-version hljs" name="code"><code class="language-java hljs"><ol class="hljs-ln" style="width:100%"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">searchUsers(<span class="hljs-string">"john"</span>);</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">// SQL：SELECT * FROM user WHERE name LIKE '%john%'</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-comment">// 返回：所有包含"john"的用户（如"john123", "xxx_john"）</span></div></div></li></ol></code><div class="opt-box"><button class="btn-code-notes ckeditor" style="background-image:url(https://i-operation.csdnimg.cn/images/a5fff6f6c9f0464c9a46b130c972952b.png);" data-report-view='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":25,"runIdx":-1}}' data-report-click='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":25,"runIdx":-1}}'>AI写代码</button><span class="code-language" data-language="java">java</span><div class="hljs-button signin active" data-title="登录复制" data-report-click='{"spm":"1001.2101.3001.4334"}' onclick="hljs.signin(event)"></div><span class="code-run-btn" data-idx="25" data-report-view='{"spm":"3001.10758","extra":{"language":"java", "idx":"25"}}' data-language="java">运行</span></div></pre> 
<hr> 
<h4><a name="t16"></a>2.3.2使用CONCAT函数</h4> 
<pre data-index="26" class="set-code-show new-version hljs" name="code"><code class="language-javascript hljs"><ol class="hljs-ln" style="width:100%"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">&lt;!-- <span class="hljs-title class_">MySQL</span>示例 --&gt;</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"findByNameLike"</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">"User"</span>&gt;</span></span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">  SELECT * FROM user </div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="4"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">  WHERE name LIKE CONCAT('%', #{keyword}, '%')</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="5"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="6"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"> </div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="7"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">&lt;!-- <span class="hljs-title class_">Oracle</span>示例 --&gt;</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="8"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"findByNameLike"</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">"User"</span>&gt;</span></span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="9"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">  SELECT * FROM user </div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="10"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">  WHERE name LIKE '%' || #{keyword} || '%'</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="11"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></div></div></li></ol></code><div class="opt-box"><button class="btn-code-notes ckeditor" style="background-image:url(https://i-operation.csdnimg.cn/images/a5fff6f6c9f0464c9a46b130c972952b.png);" data-report-view='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":26,"runIdx":-1}}' data-report-click='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":26,"runIdx":-1}}'>AI写代码</button><span class="code-language" data-language="javascript">javascript</span><div class="hljs-button signin active" data-title="登录复制" data-report-click='{"spm":"1001.2101.3001.4334"}' onclick="hljs.signin(event)"></div><span class="code-run-btn" data-idx="26" data-report-view='{"spm":"3001.10758","extra":{"language":"javascript", "idx":"26"}}' data-language="javascript">运行</span></div></pre> 
<p><strong>⚠️ 优缺点：</strong></p> 
<ul><li> <p><strong>优点</strong>：SQL意图清晰</p> </li><li> <p><strong>缺点</strong>：数据库兼容性差（不同数据库语法不同）</p> </li></ul> 
<hr> 
<h4><a name="t17"></a>2.3.3 使用<code>&lt;bind&gt;</code>标签（XML专用）</h4> 
<pre data-index="27" class="set-code-show new-version hljs" name="code"><code class="language-XML hljs"><ol class="hljs-ln" style="width:100%"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"findByNameLike"</span> <span class="hljs-attr">resultType</span>=<span class="hljs-string">"User"</span>&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">  <span class="hljs-tag">&lt;<span class="hljs-name">bind</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"pattern"</span> <span class="hljs-attr">value</span>=<span class="hljs-string">"'%' + keyword + '%'"</span> /&gt;</span></div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">  SELECT * FROM user </div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="4"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">  WHERE name LIKE #{pattern}</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="5"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line"><span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></div></div></li></ol></code><div class="opt-box"><button class="btn-code-notes ckeditor" style="background-image:url(https://i-operation.csdnimg.cn/images/a5fff6f6c9f0464c9a46b130c972952b.png);" data-report-view='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":27,"runIdx":-1}}' data-report-click='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":27,"runIdx":-1}}'>AI写代码</button><span class="code-language" data-language="XML">XML</span><div class="hljs-button signin active" data-title="登录复制" data-report-click='{"spm":"1001.2101.3001.4334"}' onclick="hljs.signin(event)"></div></div></pre> 
<p><strong>🚫 限制：</strong></p> 
<ul><li> <p>仅适用于XML配置</p> </li><li> <p>灵活性有限（难以实现左模糊 <code>value%</code>）</p> </li></ul> 
<hr> 
<h4><a name="t18"></a>2.3.4模糊查询方案对比</h4> 
<div class="table-box"><table><thead><tr><th>方案</th><th>安全性</th><th>灵活性</th><th>数据库兼容性</th><th>推荐指数</th></tr></thead><tbody><tr><td>Java层拼接通配符</td><td>✅ 高</td><td>✅ 高</td><td>✅ 完美</td><td>⭐⭐⭐⭐⭐</td></tr><tr><td>SQL的CONCAT函数</td><td>✅ 高</td><td>❌ 低</td><td>❌ 各数据库不同</td><td>⭐⭐</td></tr><tr><td><code>&lt;bind&gt;</code>标签</td><td>✅ 高</td><td>⚠️ 中</td><td>✅ 完美</td><td>⭐⭐⭐</td></tr><tr><td><code>${}</code>直接拼接</td><td>❌ 危险</td><td>✅ 高</td><td>✅ 完美</td><td>⛔ 禁止使用</td></tr></tbody></table></div> 
<h3><a name="t19"></a>2.4数据库连接池</h3> 
<h4><a name="t20"></a>2.4.1介绍</h4> 
<p><strong>什么是数据库连接池？</strong><br> 数据库连接池（Connection Pool）是管理数据库连接的缓冲池技术。它在应用启动时创建一定数量的数据库连接并保持这些连接处于活动状态。当应用需要访问数据库时，直接从池中获取连接；使用完毕后将连接归还给连接池，而不是真正关闭连接。</p> 
<p><strong>为什么需要连接池？</strong></p> 
<ol><li> <p><strong>性能优化</strong>：避免每次请求都创建新连接（TCP三次握手、数据库认证等耗时操作）</p> </li><li> <p><strong>资源管理</strong>：控制最大连接数，防止数据库被过多连接压垮</p> </li><li> <p><strong>连接复用</strong>：减少系统开销，提高响应速度</p> </li><li> <p><strong>健康监测</strong>：自动检测失效连接，保证连接可用性</p> </li></ol> 
<p><strong>连接池工作原理：</strong></p> 
<p><img src="https://i-blog.csdnimg.cn/direct/1a3c3abe685948988bf5e8cfe4eadfe0.png"></p> 
<p><strong>核心参数解析：</strong></p> 
<div class="table-box"><table><thead><tr><th>参数名</th><th>说明</th><th>默认值</th></tr></thead><tbody><tr><td><code>initialSize</code></td><td>初始连接数</td><td>0-10</td></tr><tr><td><code>minIdle</code></td><td>最小空闲连接数</td><td>0-10</td></tr><tr><td><code>maxActive/maxPoolSize</code></td><td><strong>关键</strong> 最大活跃连接数</td><td>8-100</td></tr><tr><td><code>maxWait</code></td><td>获取连接的最大等待时间(ms)</td><td>30000</td></tr><tr><td><code>validationQuery</code></td><td>连接检测SQL（如<code>SELECT 1</code>）</td><td>-</td></tr><tr><td><code>testWhileIdle</code></td><td>是否对空闲连接进行检测</td><td>true/false</td></tr><tr><td><code>timeBetweenEvictionRunsMillis</code></td><td>检测间隔(ms)</td><td>60000</td></tr></tbody></table></div> 
<h4><a name="t21"></a>2.4.2使用</h4> 
<p>2.4.2.1HikariCP (性能王者)</p> 
<p><strong>特点：</strong></p> 
<ul><li> <p>Spring Boot 2.x+ 默认连接池</p> </li><li> <p>极致轻量（130KB）</p> </li><li> <p>高并发性能最优</p> </li><li> <p>智能连接管理</p> </li></ul> 
<p><strong>Spring Boot 配置 (application.yml):</strong></p> 
<pre data-index="28" class="set-code-show new-version hljs" name="code"><code class="language-XML hljs"><ol class="hljs-ln" style="width:100%"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">spring:</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">  datasource:</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    url: jdbc:mysql://localhost:3306/mydb</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="4"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    username: root</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="5"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    password: 123456</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="6"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    driver-class-name: com.mysql.cj.jdbc.Driver</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="7"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    hikari:</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="8"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">      pool-name: MyHikariPool</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="9"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">      maximum-pool-size: 20          # 关键配置！</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="10"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">      minimum-idle: 5                # 推荐等于maximum-pool-size</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="11"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">      connection-timeout: 30000      # 30秒</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="12"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">      idle-timeout: 600000           # 10分钟</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="13"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">      max-lifetime: 1800000          # 30分钟</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="14"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">      connection-test-query: SELECT 1</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="15"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">      leak-detection-threshold: 5000 # 连接泄露检测(ms)</div></div></li></ol></code><div class="opt-box"><button class="btn-code-notes ckeditor" style="background-image:url(https://i-operation.csdnimg.cn/images/a5fff6f6c9f0464c9a46b130c972952b.png);" data-report-view='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":28,"runIdx":-1}}' data-report-click='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":28,"runIdx":-1}}'>AI写代码</button><span class="code-language" data-language="XML">XML</span><div class="hljs-button signin active" data-title="登录复制" data-report-click='{"spm":"1001.2101.3001.4334"}' onclick="hljs.signin(event)"></div></div></pre> 
<p><strong>关键参数说明：</strong></p> 
<ul><li> <p><code>maximum-pool-size</code>：必须根据实际负载设置（公式：<code>CPU核心数*2 + 有效磁盘数</code>）</p> </li><li> <p><code>leak-detection-threshold</code>：生产环境建议设置（5000-10000ms）</p> </li></ul> 
<p>2.4.2.2 Druid (监控之王)</p> 
<p><strong>特点：</strong></p> 
<ul><li> <p>阿里巴巴开源</p> </li><li> <p>强大的监控功能</p> </li><li> <p>SQL防火墙</p> </li><li> <p>详细统计信息</p> </li><li> <p>加密支持</p> </li></ul> 
<p><strong>Spring Boot 配置 (application.yml):</strong></p> 
<pre data-index="29" class="set-code-show new-version hljs" name="code"><code class="language-XML hljs"><ol class="hljs-ln" style="width:100%"><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="1"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">spring:</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="2"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">  datasource:</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="3"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    url: jdbc:mysql://localhost:3306/mydb</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="4"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    username: root</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="5"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    password: 123456</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="6"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    driver-class-name: com.mysql.cj.jdbc.Driver</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="7"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    type: com.alibaba.druid.pool.DruidDataSource # 指定类型</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="8"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    </div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="9"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">    druid:</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="10"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">      initial-size: 5</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="11"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">      min-idle: 5</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="12"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">      max-active: 20                 # 相当于Hikari的maximum-pool-size</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="13"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">      max-wait: 60000                # 获取连接超时时间</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="14"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">      filters: stat,wall,slf4j        # 开启监控</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="15"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">      # 监控配置</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="16"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">      stat-view-servlet:</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="17"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        enabled: true</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="18"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        url-pattern: /druid/*</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="19"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        login-username: admin</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="20"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        login-password: admin</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="21"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">      web-stat-filter:</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="22"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        enabled: true</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="23"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        url-pattern: /*</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="24"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">      filter:</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="25"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">        stat:</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="26"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">          log-slow-sql: true         # 记录慢SQL</div></div></li><li><div class="hljs-ln-numbers"><div class="hljs-ln-line hljs-ln-n" data-line-number="27"></div></div><div class="hljs-ln-code"><div class="hljs-ln-line">          slow-sql-millis: 1000      # 慢SQL阈值(ms)</div></div></li></ol></code><div class="opt-box"><button class="btn-code-notes ckeditor" style="background-image:url(https://i-operation.csdnimg.cn/images/a5fff6f6c9f0464c9a46b130c972952b.png);" data-report-view='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":29,"runIdx":-1}}' data-report-click='{"spm":"3001.10436","dest":"https://trae.com.cn?utm_source=community&amp;utm_medium=csdn&amp;utm_campaign=daima","extra":{"index":29,"runIdx":-1}}'>AI写代码</button><span class="code-language" data-language="XML">XML</span><div class="hljs-button signin active" data-title="登录复制" data-report-click='{"spm":"1001.2101.3001.4334"}' onclick="hljs.signin(event)"></div></div></pre> 
<p><strong>启用监控页面：</strong><br> 访问 <code>http://localhost:8080/druid</code> 查看：</p> 
<ul><li> <p>数据源状态</p> </li><li> <p>SQL监控</p> </li><li> <p>URL监控</p> </li><li> <p>Session监控</p> </li><li> <p>Spring监控</p> </li></ul> 
<hr> 
<p>2.4.2.3连接池对比：HikariCP vs Druid</p> 
<div class="table-box"><table><thead><tr><th>特性</th><th>HikariCP</th><th>Druid</th></tr></thead><tbody><tr><td><strong>性能</strong></td><td>⭐⭐⭐⭐⭐ (最快)</td><td>⭐⭐⭐⭐ (优秀)</td></tr><tr><td><strong>监控功能</strong></td><td>⭐⭐ (基础)</td><td>⭐⭐⭐⭐⭐ (强大)</td></tr><tr><td><strong>SQL防火墙</strong></td><td>❌ 不支持</td><td>✅ 支持</td></tr><tr><td><strong>加密支持</strong></td><td>❌ 不支持</td><td>✅ 支持</td></tr><tr><td><strong>连接泄露检测</strong></td><td>✅ 优秀</td><td>✅ 优秀</td></tr><tr><td><strong>配置复杂度</strong></td><td>⭐⭐ (简单)</td><td>⭐⭐⭐ (较复杂)</td></tr><tr><td><strong>社区活跃度</strong></td><td>⭐⭐⭐⭐ (全球活跃)</td><td>⭐⭐⭐⭐ (国内活跃)</td></tr><tr><td><strong>Spring Boot整合</strong></td><td>✅ 默认集成</td><td>✅ 需显式配置</td></tr></tbody></table></div> 
<h2><a name="t22"></a>3.小结</h2> 
<p>掌握这四招，你数据库操作的水平绝对能上一个新台阶！<strong>安全问题刻不容缓，性能优化也永无止境。</strong> 别再让这些问题拖后腿了，现在就动手优化吧！</p> 
<p>实践中遇到具体坑了？或者有独门优化技巧？<strong>欢迎在评论区一起交流讨论！</strong> 如果觉得这篇干货对你有帮助，别忘了<strong>点个赞、收藏一下</strong>支持博主呀！</p> 
<p> </p> 
<p> </p>
                </div>
        </div>
        <div id="blogVoteBox" style="width:400px;margin:auto;margin-top:12px" class="blog-vote-box"><div class="vote-box csdn-vote" style="opacity: 1;">
      
        <div class="pos-box pt0" style="height: 203px; visibility: visible;">
          
          <iframe class="vote-frame" name="voteFrame" src="https://app-blog.csdn.net/component/vote?from=https%3A%2F%2Fblog.csdn.net&amp;id=1891566&amp;voteusername=2301_81073317&amp;showrecommend=1&amp;pageid=tlKLizgH" frameborder="0" scrolling="no"></iframe>
        
      </div>
    </div></div>
         <div id="blogExtensionBox" style="margin-top:12px" class="blog-extension-box"><div class="blog_extension blog_extension_type2" id="blog_extension"><div class="blog_extension_card" data-report-click='{"spm":"1001.2101.3001.6470"}'>
            <div class="blog_extension_card_header">
            <img src="https://i-blog.csdnimg.cn/direct/2d20333d275f4eaea9886df079636b01.jpeg" alt="">
              <span class="blog_extension_card_title active" title="商务合作，技术交流，欢迎添加">商务合作，技术交流，欢迎添加</span>
            </div>
            <div class="blog_extension_card_author">
              <p class="blog_extension_card_author_img_box"><img src="https://g.csdnimg.cn/extension-box/2.0.0/image/weixin.png" alt=""><span>微信名片</span></p>
              <img src="https://g.csdnimg.cn/extension-box/2.0.0/image/ic_move.png" class="blog_extension_card_author_right" alt="">
            </div>
          </div></div></div>
    </article>
</body>
</html>